{% extends 'base.html' %}

{% block title %} Detail Page {% endblock %}

{% load static %}

{% block extra_head %}
    <meta name="description" content="Shows the details for a specific hockey tournament and all of its reviews, ratings, and hotels.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="{% static 'css/tournament_details.css' %}">
{% endblock %}

{% block content %}
<section class="jumbotron" style="background-image: url('{% static 'images/detail-bg.jpg' %}')">
    <div class="title-container">
        <h1 class="title">{{ tournament.name }}</h1>
        <p class="location"><i class="fa-solid fa-map-pin"></i> {{ tournament.location }}</p>
        <div class="rating-likes">
            <div class="rating">
                <p clas="stars"><i class="fa-solid fa-star"></i> {{ tournament.overall_rating }}</p>
            </div>
            <div class="likes-dislikes">
                <p class="likes"><i class="fa-regular fa-circle-up"></i> {{ tournament.thumbs_up }}</p>
                <p class="dislikes"><i class="fa-regular fa-circle-down"></i> {{ tournament.thumbs_down }}</p>
            </div>
        </div>
    </div>
</section>
<section class="detail-section">
    <h1 class="section-title">Average grades</h1>
    <div class="core-details">
        {% load custom_filters %}
        <div class="detail">
            <div class="grade">
                {{ tournament.reffing_quality_average|quality_grade }}
            </div>
            <div class="grade-title">
                REFEREEING
            </div>
        </div>

        <div class="detail">
            <div class="grade">
                {{ tournament.hotel_quality_average|quality_grade }}
            </div>
            <div class="grade-title">
                HOTELS
            </div>
        </div>

        <div class="detail">
            <div class="grade">
                {{ tournament.director_communication_average|quality_grade }}
            </div>
            <div class="grade-title">
                COMMUNICATION
            </div>
        </div>
    </div>
</section>
<section class="review-section">
    <h1 class="section-title">User Reviews</h1> 
    <div class="add-button-wrapper">
        <a class="add-button" href="{% url 'reviews:review' %}">Add Review <i class="fa-solid fa-plus"></i></a>
        <a class="add-button" href="{% url 'reviews:restaurant_entry' %}">Add Restaurant <i class="fa-solid fa-plus"></i></a>
        <a class="add-button" href="{% url 'reviews:entertainment_entry' %}">Add Entertainment <i class="fa-solid fa-plus"></i></a>
    </div>
    <div class="review-wrapper">
        {% for review in reviews %}
        <div class="review">
            <h2 class="review-title">{{ review.title }}</h2>
            <div class="date-rating">
                <div class="date">
                    <i class="fa-regular fa-calendar-days"></i> {{ review.date_of_visit|date:"F" }}
                </div>
                <div class="rating">
                    <i class="fa-solid fa-star"></i> {{ review.rating }}
                </div>
            </div>
            <p>{{ review.experience }}</p>
        </div>
        {% empty %}
        <div class="empty-wrapper">
            <p class="empty-notice">No reviews exist for this tournament.</p>
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}