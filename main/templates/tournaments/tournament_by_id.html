{% extends 'base.html' %}

{% block title %} Detail Page {% endblock %}

{% load static %}

{% block extra_head %}
    <meta name="description" content="Displays the information for a given tournament.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="{% static 'css/tournament_by_id.css' %}">
    <script src="{% static 'js/tournament_by_id.js' %}"></script>
{% endblock %}

{% block content %}
<section class="section">
    <div class="banner top">
        <div class="container">
            <div class="tournament-rating">
                <div class="star-rating">
                    <!-- Display whole stars -->
                    {% for _ in whole_stars %}
                        <i class="fa-solid fa-star"></i>
                    {% endfor %}

                    <!-- Display half star -->
                    {% for _ in half_star %}
                        <i class="fa-regular fa-star-half-stroke"></i>
                    {% endfor %}

                    <!-- Display empty stars -->
                    {% for _ in empty_stars %}
                        <i class="fa-regular fa-star"></i>
                    {% endfor %}
                </div>
                <div class="number-rating">
                    <span>({{tournament.rating_overall}})</span>
                </div>
            </div>
            <a class="favorite-link" href="">+ Add To Favorites</a>
            <h1 class="banner-title">{{ tournament.name }}</h1>
            <div class="rink-list">
                <p>Rinks:</p>
                {% for rink in rinks %}
                    <a class="tournament-location" href="https://www.google.com/maps/search/?api=1&query={{ rink.address|urlencode }}" target="_blank">
                        <i class="fa-solid fa-location-dot"></i> {{ rink.address }}
                    </a>
                    {% empty %}
                    <p>No rinks have been added.</p>
                {% endfor %}
            </div>
            <div class="thumbs-actions-container">
                <div class="thumbs-wrapper">
                    <span class="likes">
                        <i class="fa-regular fa-thumbs-up"></i> {{ tournament_metadata.count_thumbs_up }}
                    </span>
                    <span class="dislikes">
                        <i class="fa-regular fa-thumbs-down"></i> {{ tournament_metadata.count_thumbs_down }}
                    </span>
                </div>
                <div class="nearby-actions">
                    <a class="nearby-link" href="{% url 'restaurants:restaurants_by_tournament' tournament.id %}"><i class="fa-solid fa-utensils"></i> Nearby Restaurants</a>
                    <a class="nearby-link" href="{% url 'entertainments:entertainments_by_tournament' tournament.id %}"><i class="fa-solid fa-circle-nodes"></i> Nearby Entertainment</a>
                </div>
            </div>
        </div>
    </div>
</section>
<div class="tournament-details">
    <div class="container">
        <h4 class="details-title">Tournament Details</h4>
        <div class="details-wrapper">
            <div class="detail-section">
                <div class="detail-item">
                    <div class="label">Reffing quality</div>
                    <div class="value">{{ tournament_metadata.rating_reffing }}</div>
                </div>
                <div class="detail-item">
                    <div class="label">Communication quality</div>
                    <div class="value">{{ tournament_metadata.rating_comms }}</div>
                </div>
                <div class="detail-item">
                    <div class="label">Hotels quality</div> 
                    <div class="value">{{ tournament_metadata.rating_hotels }}</div>
                </div>
            </div>
            <div class="detail-section">
                <div class="detail-item">
                    <div class="label">Parking cost</div>
                    <div class="value">{{ tournament_metadata.parking_cost }}</div>
                </div>
                <div class="detail-item">
                    <div class="label">Parking valet</div>
                    <div class="value">
                        {% if tournament_metadata.parking_valet %}
                            Yes
                        {% else %}
                            No
                        {% endif %}
                    </div>
                </div>
                <div class="detail-item">
                    <div class="label">Parking size</div>
                    <div class="value">{{ tournament_metadata.parking_size }}</div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="tournament-reviews">
    <div class="container">
        <h4 class="reviews-title">Tournament Reviews</h4>
        <div class="reviews-wrapper">
            {% for review in short_reviews %}
                <a class="review" data-month="{{ review.date_of_review|date:'F' }}" href="">
                    <div class="review-data">
                        <div class="review-title">{{ review.title }}</div>
                        <div class="review-text">{{ review.review_text|truncatechars:200 }}</div>

                        <div class="review-meta">
                            <div class="review-rating">{{ review.overall_rating }} <i class="fa-solid fa-star"></i></div>
                            <div class="review-date">{{ review.date_of_review|date:'F' }}</div>
                            <div class="review-thumb">
                                <span class="thumb"><i class="fa-regular fa-thumbs-up"></i></span>
                            </div>
                        </div>
                    </div>
                </a>
            {% empty %}
                <p>No short reviews found for this tournament.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}