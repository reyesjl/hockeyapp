{% extends 'base.html' %}

{% block title %} Detail Page {% endblock %}

{% load static %}

{% block extra_head %}
    <meta name="description" content="Displays the information for a given tournament.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="{% static 'css/tournament_by_id.css' %}">
    <script src="{% static 'js/tournament_by_id.js' %}"></script>
{% endblock %}

{% block content %}
<section class="section">
    <div class="banner top">
        <div class="container">
            <div class="tournament-rating">
                <div class="star-rating">
                    <!-- Display whole stars -->
                    {% for _ in whole_stars %}
                        <i class="fa-solid fa-star"></i>
                    {% endfor %}

                    <!-- Display half star -->
                    {% for _ in half_star %}
                        <i class="fa-regular fa-star-half-stroke"></i>
                    {% endfor %}

                    <!-- Display empty stars -->
                    {% for _ in empty_stars %}
                        <i class="fa-regular fa-star"></i>
                    {% endfor %}
                </div>
                <div class="number-rating">
                    <span>({{tournament.rating_overall}})</span>
                </div>
            </div>
            <h1 class="banner-title">{{ tournament.name }}</h1>
            <a class="tournament-location" href="https://www.google.com/maps/search/?api=1&query={{ tournament.location|urlencode }}" target="_blank">
                <i class="fa-solid fa-location-dot"></i> {{ tournament.location }}
            </a>
            <p class="tournament-rinks">Rinks Played In: {{ tournament_metadata.count_rinks }}</p>
            <div class="thumbs-actions-container">
                <div class="thumbs-wrapper">
                    <span class="likes">
                        <i class="fa-regular fa-thumbs-up"></i> {{ tournament_metadata.count_thumbs_up }}
                    </span>
                    <span class="dislikes">
                        <i class="fa-regular fa-thumbs-down"></i> {{ tournament_metadata.count_thumbs_down }}
                    </span>
                </div>
                <div class="nearby-actions">
                    <a class="nearby-link" href="{% url 'restaurants:restaurants_by_tournament' tournament.id %}"><i class="fa-solid fa-utensils"></i> Nearby Restaurants</a>
                    <a class="nearby-link" href="#"><i class="fa-solid fa-circle-nodes"></i> Nearby Entertainment</a>
                </div>
            </div>
        </div>
    </div>
</section>
<div class="metadata-container">
    {% if tournament_metadata %}
        <!-- Ratings Section -->
        <div class="metasection ratings">
            <div class="container ratings">
                <h4 class="section-title">Average Ratings</h4>
                <div class="metasection-wrapper">
                    <div class="meta-item">
                        <div class="meta-score">{{ tournament_metadata.rating_reffing }}</div>
                        <div class="meta-label">Reffing Quality</div> 
                    </div>
                    <div class="meta-item">
                        <div class="meta-score">{{ tournament_metadata.rating_comms }}</div>
                        <div class="meta-label">Communication Quality</div> 
                    </div>

                    <div class="meta-item">
                        <div class="meta-score">{{ tournament_metadata.rating_hotels }}</div>
                        <div class="meta-label">Hotel Quality</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Parking Section -->
        <div class="metasection parking">
            <div class="container ratings">
                <h4 class="section-title">Average Parking</h4>
                <div class="metasection-wrapper parking">
                    <div class="meta-item">
                        <div class="meta-score">{{ tournament_metadata.parking_size }}</div>
                        <div class="meta-label">Parking Size</div> 
                    </div>
                    <div class="meta-item">
                        <div class="meta-score">{{ tournament_metadata.parking_cost }}</div>
                        <div class="meta-label">Parking Type</div> 
                    </div>

                    <div class="meta-item">
                        <div class="meta-score">
                            {% if tournament_metadata.parking_valet %}
                                Yes
                            {% else %}
                                No
                            {% endif %}
                        </div>
                        <div class="meta-label">Parking Valet</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Review Section -->
        <div class="metasection reviews">
            <div class="container ratings">
                <div class="title-action-wrapper">
                    <h4 class="section-title">User Reviews</h4>
                    <a class="action-link" href="#">Add Review +</a>
                </div>
                <div class="month-filter-wrapper">
                    <label for="monthSelect">Filter: </label>
                    <select id="monthSelect" name="month">
                        <option value="all">All</option>
                        <option value="january">January</option>
                        <option value="february">February</option>
                        <option value="march">March</option>
                        <option value="april">April</option>
                        <option value="may">May</option>
                        <option value="june">June</option>
                        <option value="july">July</option>
                        <option value="august">August</option>
                        <option value="september">September</option>
                        <option value="october">October</option>
                        <option value="november">November</option>
                        <option value="december">December</option>
                    </select>
                </div>
                <div class="metasection-wrapper reviews">
                    <a class="meta-item review" data-month="January" href="">
                        <div class="review-data">
                            <div class="review-date-rating">
                                <span class="month">January</span>
                                <span class="rating-score">4.8 <i class="fa-solid fa-star"></i></span>
                            </div>
                            
                            <h4 class="review-title">Subject of the review</h4>
                            <p>This is a text user review trimmed to about 50-90 chars ...</p>
                            <div class="review-thumb">
                                <span class="thumb"><i class="fa-regular fa-thumbs-up"></i></span>
                            </div>
                        </div>
                    </a>
                    <a class="meta-item review" data-month="January" href="">
                        <div class="review-data">
                            <div class="review-date-rating">
                                <span class="month">January</span>
                                <span class="rating-score">4.8 <i class="fa-solid fa-star"></i></span>
                            </div>
                            
                            <h4 class="review-title">Subject of the review</h4>
                            <p>This is a text user review trimmed to about 50-90 chars ...</p>
                            <div class="review-thumb">
                                <span class="thumb"><i class="fa-regular fa-thumbs-up"></i></span>
                            </div>
                        </div>
                    </a>
                    <a class="meta-item review" data-month="March" href="">
                        <div class="review-data">
                            <div class="review-date-rating">
                                <span class="month">March</span>
                                <span class="rating-score">4.8 <i class="fa-solid fa-star"></i></span>
                            </div>
                            
                            <h4 class="review-title">Subject of the review</h4>
                            <p>This is a text user review trimmed to about 50-90 chars ...</p>
                            <div class="review-thumb">
                                <span class="thumb"><i class="fa-regular fa-thumbs-up"></i></span>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}