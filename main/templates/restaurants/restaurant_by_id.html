{% extends 'base.html' %}

{% block title %} Detail Page {% endblock %}

{% load static %}

{% block extra_head %}
    <meta name="description" content="Displays the information for a given restaurant.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="{% static 'css/restaurant_by_id.css' %}">
    <script src="{% static 'js/restaurant_by_id.js' %}"></script>
{% endblock %}

{% block content %}
<section class="section">
    <div class="banner top">
        <div class="container">
            <div class="rating-favorite-wrapper">
                <div class="restaurant-rating">
                    <div class="star-rating">
                        <!-- Display whole stars -->
                        {% for _ in whole_stars %}
                            <i class="fa-solid fa-star"></i>
                        {% endfor %}

                        <!-- Display half star -->
                        {% for _ in half_star %}
                            <i class="fa-regular fa-star-half-stroke"></i>
                        {% endfor %}

                        <!-- Display empty stars -->
                        {% for _ in empty_stars %}
                            <i class="fa-regular fa-star"></i>
                        {% endfor %}
                    </div>
                    <div class="number-rating">
                        <span>({{restaurant.rating_overall}})</span>
                    </div>
                </div>
                <a class="favorite-link" href="">+ Add To Favorites</a>
            </div>
            <h1 class="banner-title">{{ restaurant.name }}</h1>
        </div>
    </div>
</section>
<div class="restaurant-details">
    <div class="container">
        <h4 class="details-title">Restaurant Details</h4>
        <div class="details-wrapper">
            <div class="detail-section">
                <div class="detail-item">
                    <div class="label">Food type</div>
                    <div class="value">{{ restaurant_metadata.food_type }}</div>
                </div>
                <div class="detail-item">
                    <div class="label">Meal quality</div>
                    <div class="value">{{ restaurant_metadata.meal_quality_rating }}</div>
                </div>
                <div class="detail-item">
                    <div class="label">Service quality</div>
                    <div class="value">{{ restaurant_metadata.service_quality_rating }}</div>
                </div>
            </div>
            <div class="detail-section">
                <div class="detail-item">
                    <div class="label">Seating time</div>
                    <div class="value">{{ restaurant_metadata.seating_time }} minutes</div>
                </div>
                <div class="detail-item">
                    <div class="label">Payment process</div> 
                    <div class="value">{{ restaurant_metadata.payment_process }}</div>
                </div>
                <div class="detail-item">
                    <div class="label">Parking size</div>
                    <div class="value">{{ restaurant_metadata.parking_size }}</div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="restaurant-reviews">
    <div class="container">
        <h4 class="reviews-title">Restaurant Reviews</h4>
        <a class="favorite-link" href="{% url 'reviews:add_restaurant_review' restaurant.id %}">+ Add Review</a>
        <div class="month-slider">
            <div class="slide-button slide-left"><i class="fa-solid fa-caret-left"></i></div>
            <div class="month-list">
                <div class="month active">All</div>
                <div class="month">January-March</div>
                <div class="month">April-June</div>
                <div class="month">July-September</div>
                <div class="month">October-December</div>
            </div>
            <div class="slide-button slide-right"><i class="fa-solid fa-caret-right"></i></div>
        </div>
        <div class="reviews-wrapper">
            {% for review in short_reviews %}
                <a class="review" data-month="{{ review.date_of_review|date:'F' }}" href="">
                    <div class="review-data">
                        <div class="review-title">{{ review.title }}</div>
                        <div class="review-text">{{ review.review_text|truncatechars:200 }}</div>

                        <div class="review-meta">
                            <div class="review-date">{{ review.date_of_review|date:'F' }}</div>
                            <div class="review-rating">{{ review.overall_rating }} <i class="fa-solid fa-star"></i></div>
                        </div>
                    </div>
                </a>
            {% empty %}
                <p>No short reviews found for this restaurant.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}